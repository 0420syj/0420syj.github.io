---
slug: oss-contribute
title: "오픈소스 기여 후기 💻"
description: "facebook/docusaurus에 기여한 후기를 남깁니다."
image: "./images/preview.png"
authors: [wannysim]
tags: [yarn, yarn berry, package, "yarn upgrade", "yarn upgrade-interactive"]
enableComments: true
---

[facebook/docusaurus](https://github.com/facebook/docusaurus)에 기여한 후기를 남깁니다.

<!-- truncate -->

# 오픈소스 기여 후기 💻

## 개요

[facebook/docusaurus](https://github.com/facebook/docusaurus)에 PR을 통해 기여한 후기를 남깁니다.

PR 링크 : [#9006](https://github.com/facebook/docusaurus/pull/9006)

## 배경

평소에 docuaurus에 관심이 많았다.
그러던 중 작은 오류를 발견했다.

그래서 오류를 수정하고 PR을 날려보기로 했다.

## 과정

### 1. 최신 코드 확인

우선 최신 코드를 받아서 문제를 파악했다.
그런데, 누가 이미 얼마전에 문제를 발견하고 수정한 것을 확인했다.

### 2. 문제 파악

그 사람의 PR을 보고 더 자세히 살펴보았다.
그러다가 문제를 발견했다.

어쩌구저쩌구

### 3. `CONTRIBUTING.md` 읽어보기

규모있는 오픈소스 프로젝트에는 `CONTRIBUTING.md` 파일이 무조건 존재한다.
읽지 않고 무작정 PR을 날리면 reject 당하는 것은 물론 maintainers에게 불편을 끼칠 수도 있다.

그래서 [`CONTRIBUTING.md`](https://github.com/facebook/docusaurus/blob/main/CONTRIBUTING.md#pull-requests) 파일을 읽어보았다.

### 4. 코드 수정

해당 프로젝트를 fork한 후, 수정한 코드를 커밋했다.
커밋 메시지도 규칙에 맞게 작성했다.

### 5. PR 날리기

PR도 규칙에 맞게 작성했다.
이미 Merge된 PR들도 살펴보고, 어떤 식으로 작성해야 하는지 감을 잡았다.

maintainer를 위해 PR 양식에 아주 상세하게 설명했다.
어떤 문제를, 왜, 어떻게 수정했는지, 그리고 어떻게 테스트했는지 등을 자세히 적었다.

나에게 사실상 이 아이디어를 제공해준 이전 PR을 태그하여, 비교하기 쉽게 만들었다.

PS. 처음 PR을 날린 후에 수정할 수도 있다는 것을 알게 되었다.
다만 최초 PR의 commit이 여러개인 경우, maintainers가 혼란스러워할 수 있으니 squash해서 하나의 commit으로 만들었다.
과거에 다른 프로젝트에서는 PR 규칙 중, 반드시 1PR에 1개의 commit만 있어야 한다는 규칙이 있었다.
여기에는 그런 규칙은 없었지만, 가급적 1PR에 1개의 commit이 있어야 한다고 것에 대해서는 리뷰어 관점에서 전적으로 동의한다.

### 6. 1번째 리뷰

PR을 날리고 나서는, 리뷰를 받기 위해 기다렸다.
첫 리뷰는 일주일 후에 왔다.

리뷰어는 내 아이디어에 대해서는 동의했는지,
바로 코드를 어떻게 개선할 수 있는지 보여주었다.

나는 `js-yaml`이라는 라이브러리를 사용했는데,
리뷰어는 대신 `shelljs`를 사용하여 훨씬 쉽게 문제를 해결했다.
나도 처음에는 `shelljs`를 사용하려고 했는데, 사용자의 shell에 접근한다는 점이 다소 마음에 걸렸다.

그러나, 그 리뷰를 받고 확인해보니 해당 package는 이미 `shelljs`를 사용하고 있었다.
그렇다면 당연히 리뷰 내용을 수용하지 않을 이유가 없다.

### 7. 리뷰 확인 후, 코드 수정

리뷰 내용에 대한 답글을 남겼다.
당연히 리뷰어의 코드가 훨씬 간결하고, 명령어로 yarn 버전을 확인한다는 점에서 기능적으로도 확실했다.

처음 PR을 날린 후로 일주일이나 시간이 흘렀기 때문에
우선 main 브랜치를 pull 받아서 최신 코드를 확인했다.
다행히 충돌은 없었다.

리뷰어의 코드를 바탕으로 코드를 수정했다.
코드를 조금 더 null safe하게 만들었다.
현재 PR에 대한 리뷰에 따른 history를 남기기 위해, 최초 PR 이후에는 squash하지 않았다.

### 8. 2번째 리뷰 & 코드 수정

2번째 리뷰는 하루도 안되어서 왔다.
이번엔 다른 리뷰어가 리뷰를 해주었다.

해당 리뷰어는 현재 코드에 문제점이 있을 수 있다고 지적했다.

나는 댓글로 그의 리뷰에 동의하며
정확히 어떤 상황에서 문제가 발생할 수 있는지 설명했다.
더불어 그 문제를 해결하기 위해 어떻게 코드를 수정할 수 있는지도 댓글로 남겼다.

위에 설명한대로 코드를 수정하고,
추가적으로 맥락상 더 알맞도록 메서드명을 수정했다.
메서드명 수정에 대해서는 왜 이것이 맥락상 더 알맞은지에 대해서도 설명했다.

### 9. 마지막 리뷰

2번째 리뷰어가 리뷰를 해주었다.

불필요한 연산자를 제거하는 것을 제안했다.
왜 그것이 불필요한지 생각해보고, 왜 그 연산자를 제거하는게 더 나은지에 대한 설명과 함께
리뷰어의 리뷰를 내가 받아들였다.

제안을 수락하자 바로 commit이 이루어졌다.

해당 리뷰어가 이 PR에 대해 나와 함께 공동 작업이 이루어졌다.
`Co-authored-by: 2번째 리뷰어` 라는 메세지가 commit description에 추가되었다.

### 10. PR Merge

처음 리뷰해주었던 리뷰어가
오픈소스 세계에서는 마지막 리뷰라고 할 수 있는 그 댓글, "LGTM"을 남겼다.

이윽고 PR이 Merge되었다.

### 11. 마무리

내가 작업했던 branch, fork한 repo를 삭제했다.

이 코드는 docusaurus main repo에 반영되었다.
아마 v2.4.2부터는 해당 버그가 수정되었을 것이다.

이제 yarn berry를 사용하는 사람들은
올바른 버전 업그레이드 명령어를 확인할 수 있을 것이다.

## 후기

느꼈던 내용과 배운점
