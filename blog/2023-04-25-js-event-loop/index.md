---
slug: js-event-loop
title: (JS) Event Loopì™€ ë¹„ë™ê¸° ğŸ”
description: js-event-loop ì •ë¦¬
image: "./images/preview.png"
authors: [wannysim]
tags: [javascript, event loop, asynchronous]
enableComments: true
---

Single Threaded Languageì¸ Javascriptì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ Event Loopì™€ í•¨ê»˜ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

<!-- truncate -->

## ì‹œì‘í•˜ê¸°ì— ì•ì„œ ğŸ“

JavascriptëŠ” ì›¹ ê°œë°œì— ë„ë¦¬ ì‚¬ìš©ë˜ì§€ë§Œ, ì‹±ê¸€ ìŠ¤ë ˆë“œì´ê¸° ë•Œë¬¸ì— ì˜¬ë°”ë¥´ê²Œ ê´€ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì´ëŸ¬í•œ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ Javascriptê°€ Event Loopë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë´…ë‹ˆë‹¤.

## ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì´ë€? ğŸ¤”

ì„¤ëª…í•˜ê¸°ì— ì•ì„œ ì½”ë“œ ì‹¤í–‰ ë°©ì‹ì— ëŒ€í•œ 2ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì¸ ë™ê¸° í”„ë¡œê·¸ë˜ë°ê³¼ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

- **ë™ê¸° í”„ë¡œê·¸ë˜ë°** : í•œ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ ì‘ì—…ì„ ì‹œì‘
- **ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°** : ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰

ë°ì´í„° fetching, ìœ ì € input ì²˜ë¦¬, DOM ì—…ë°ì´íŠ¸ì™€ ê°™ì€ ì‘ì—…ì— ì„œë¡œ ë‹¤ë¥¸ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆëŠ” ì›¹ì„ ê°œë°œí•˜ëŠ”ë° ìœ ìš©í•©ë‹ˆë‹¤. JavascriptëŠ” ì‘ì—… ì‹¤í–‰ê³¼ ì½œë°±ì„ ê´€ë¦¬í•˜ëŠ” Event Loopë¥¼ ì‚¬ìš©í•´ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

## Event Loop ìì„¸íˆ ì´í•´í•˜ê¸° ğŸ”

Event LoopëŠ” Javascript ëŸ°íƒ€ì„ í™˜ê²½ì˜ ì¤‘ìš”í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. Event LoopëŠ” ì½”ë“œ ì‹¤í–‰, ì´ë²¤íŠ¸ ì²˜ë¦¬, ì½œë°±ì„ non-blocking ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

Event Loopì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„± ìš”ì†Œê°€ ìˆìŠµë‹ˆë‹¤:

:::note Event Loopì˜ êµ¬ì„± ìš”ì†Œ

1. **Call Stack**: Javascript ì—”ì§„ì€ í•¨ìˆ˜ í˜¸ì¶œì„ ì„ ì…ì„ ì¶œ(LIFO) ìˆœì„œë¡œ ì—¬ê¸°ì— ì €ì¥í•©ë‹ˆë‹¤. í•¨ìˆ˜ëŠ” í˜¸ì¶œë  ë•Œ ìŠ¤íƒì— ì¶”ê°€ë˜ê³  ì™„ë£Œë˜ë©´ ì œê±°ë©ë‹ˆë‹¤.

2. **Callback Queue:** "ì‘ì—… Queue" ë˜ëŠ” "ë©”ì‹œì§€ Queue"ë¼ê³ ë„ í•˜ë©°, ì™„ë£Œëœ ë¹„ë™ê¸° ì‘ì—… ì½œë°±ì´ ì €ì¥ë˜ëŠ” ê³³ì…ë‹ˆë‹¤. ì½œë°±ì€ ì¶”ê°€ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

3. **Web API:** `setTimeout`, `fetch`, `addEventListener`ì™€ ê°™ì€ ë¸Œë¼ìš°ì € ì œê³µ APIëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. Javascript ì—”ì§„ê³¼ëŠ” ë³„ê°œì´ì§€ë§Œ Event Loopì™€ ê¸´ë°€í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.

4. **Microtask Queue:** ì´ QueueëŠ” í”„ë¡œë¯¸ìŠ¤ ë° `MutationObserver` ì½œë°± ê°™ì€ "Microtask"ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. Microtask QueueëŠ” Callback Queueë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ìœ¼ë©°, Call Stackì˜ ê° ì‘ì—… ì´í›„ì— ì²˜ë¦¬ë©ë‹ˆë‹¤.

:::

Event LoopëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ë™í•©ë‹ˆë‹¤:

:::info Event Loopì˜ ì‘ë™ ë°©ì‹

1. Javascript ì—”ì§„ì´ Call Stackì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. ë¹„ë™ê¸° ì‘ì—…ì€ ê° Web APIë¡œ off-load ë©ë‹ˆë‹¤.
3. ì™„ë£Œëœ ë¹„ë™ê¸° ì‘ì—… ì½œë°±ì´ Callback Queueì— ì¶”ê°€ë©ë‹ˆë‹¤.
4. Event LoopëŠ” Call Stackì´ ë¹„ì›Œì§„ í›„ Microtask Queueë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
5. Event LoopëŠ” Callback Queueë¥¼ ì²˜ë¦¬í•˜ì—¬ ê° ì½œë°±ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

```mermaid {theme: "forest"}
1. Call Stack           2. Web APIs
   ----------              --------
   |        | ---Async---> |      |
   ----------              --------
   |        |              |      |
   ----------              --------
        |                      |
        |                      |
        v                      v
3. Microtask Queue    4. Callback Queue
   ---------------       -------------
   |             | <---- |           |
   ---------------       -------------
   |             |       |           |
   ---------------       -------------
```

:::

ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ Javascript ì—”ì§„ì€ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì‘ì—…ì„ ê³„ì† ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Node.jsì™€ ë¸Œë¼ìš°ì €ì˜ Event Loop ğŸŒ

Node.jsì™€ ë¸Œë¼ìš°ì € ëª¨ë‘ Event Loopë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì½”ë“œ ì‹¤í–‰ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ëª‡ ê°€ì§€ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤:

:::note Node.jsì™€ ë¸Œë¼ìš°ì €ì˜ Event Loop ì°¨ì´ì 

1. **Web APIì™€ Timer:** ë¸Œë¼ìš°ì €ëŠ” ì›¹ API ì„¸íŠ¸ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, Node.jsëŠ” ìì²´ APIì™€ íƒ€ì´ë¨¸(`setImmediate`, `process.nextTick` ë“±)ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ìš” ì°¨ì´ì ì€ ê° í™˜ê²½ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ APIì…ë‹ˆë‹¤.

2. **Concurrency ëª¨ë¸:** ë¸Œë¼ìš°ì €ëŠ” ì›¹ ì›Œì»¤ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ë™ì‹œì— ì‹¤í–‰í•©ë‹ˆë‹¤. ë°˜ë©´ Node.jsëŠ” ë¹„ìŠ·í•œ ë™ì‹œì„±ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ì›Œì»¤ ìŠ¤ë ˆë“œ ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

3. **Event-Driven ì•„í‚¤í…ì²˜:** Node.jsì™€ ë¸Œë¼ìš°ì € ëª¨ë‘ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³  ìˆ˜ì‹ í•˜ëŠ” ì´ë²¤íŠ¸ ì£¼ë„ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œ ì´ë²¤íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìœ ì € ìƒí˜¸ì‘ìš©ê³¼ ê´€ë ¨ì´ ìˆìœ¼ë©°, Node.jsì—ì„œëŠ” I/O ì‘ì—…ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.

4. **Event Loop êµ¬í˜„:** ë¸Œë¼ìš°ì €ëŠ” HTML5 ì‚¬ì–‘ì„ ì‚¬ìš©í•˜ë©°, Node.jsëŠ” libuv ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìì²´ í¬ë¡œìŠ¤ í”Œë«í¼ Event Loop êµ¬í˜„ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì°¨ì´ì ì—ë„ ë¶ˆêµ¬í•˜ê³  Event Loopì˜ ì „ë°˜ì ì¸ ë™ì‘ ë° ê¸°ëŠ¥ì€ ë‘ í™˜ê²½ì—ì„œ í¬ê²Œ ë™ì¼í•©ë‹ˆë‹¤.

:::

|                       | ë¸Œë¼ìš°ì €            | Node.js                    |
| --------------------- | ------------------- | -------------------------- |
| Web APIì™€ Timer       | Web API             | ìì²´ APIì™€ íƒ€ì´ë¨¸          |
| Concurrency ëª¨ë¸      | Web Workers API     | Worker Threads module      |
| Event-Driven ì•„í‚¤í…ì²˜ | User Interface      | I/O operations             |
| Event Loop êµ¬í˜„       | HTML5 specification | Built on the libuv library |

## ê²°ë¡  ğŸ

Event LoopëŠ” Javascript ì–¸ì–´ ëŸ°íƒ€ì„ í™˜ê²½ì˜ ê¸°ë³¸ì ì¸ ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— Javascript ê°œë°œìì—ê²Œ Event Loopë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ í•„ìˆ˜ì ì…ë‹ˆë‹¤. Event Loopì™€ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì„ ë§ˆìŠ¤í„°í•˜ë©´ ë›°ì–´ë‚œ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ëŠ” ë°˜ì‘ì„±ì´ ë›°ì–´ë‚˜ê³  íš¨ìœ¨ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
